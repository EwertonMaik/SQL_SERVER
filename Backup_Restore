-- SQl Server Possui os Modos de Recuperação
COMPLETO - Registra todos as Transações no arquivo de LOG, sendo necessário realizar backup de LOG.
SIMPLES - Registrar as transações no arquivo de LOG, porém são truncadas automaticamente quando o arquivo enche ou sofre checkpoint
BULK-LOGGED - Registra as transações no arquivo de LO e é necessário fazer backup de log também.

-- Tipos de Backup
FULL - Backup Completo
INCREMENTAL - Vários arquivos de backup,com alterações apenas feitas após ultimo backup.
DIFERENCIAL - Backup cumulativo, com todas as alterações feitas desde o último backup FULL realizado.
LOG - Backup de LOG contendo todas os registros das transações.

--Set o Banco de Dados em Modo de Recuperação FULL
ALTER DATABASE TestDB SET RECOVERY FULL;

--Set Banco de Dados em Modo de Recuperação SIMPLES
ALTER DATABASE [TestDB] SET RECOVERY SIMPLE WITH NO_WAIT
GO

--Set Banco de Dados em Modo de Recuperação Bulk Logged
ALTER DATABASE [TestDB] SET RECOVERY BULK_LOGGED WITH NO_WAIT
GO

--###################################################
-- Criado uma tabela Produto no Banco de Dados (TestDB)
CREATE TABLE [dbo].[Produto](
	[id_prod] [int] IDENTITY(1,1) NOT NULL,
	[nm_prod] [varchar](100) NOT NULL,
	[id_cat_prod] [int] NOT NULL,
	[dt_cad_prod] [datetime] NOT NULL,
 CONSTRAINT [IX_Produto_id_prod] PRIMARY KEY CLUSTERED 
(
	[id_prod] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO

-- Inserindo Registros na Tabela Produto
INSERT INTO dbo.Produto (nm_prod, id_cat_prod) VALUES ('Cadastro 01', 1);
INSERT INTO dbo.Produto (nm_prod, id_cat_prod) VALUES ('Cadastro 02', 1);
INSERT INTO dbo.Produto (nm_prod, id_cat_prod) VALUES ('Cadastro 03', 1);
INSERT INTO dbo.Produto (nm_prod, id_cat_prod) VALUES ('Cadastro 04', 1);
INSERT INTO dbo.Produto (nm_prod, id_cat_prod) VALUES ('Cadastro 05', 1);

-- Realizado o Backup da base TestDB, FULL e Salvo no disco C:
BACKUP DATABASE [TestDB]
TO  DISK = N'C:\TestDB_Backup_FULL.bak'
WITH DESCRIPTION = N'Backup_FULL', NOFORMAT, NOINIT,
NAME = N'TestDB-Completo Banco de Dados Backup',
SKIP, NOREWIND, NOUNLOAD,  STATS = 5
GO

--Inserindo mais registros na tabela Produto
INSERT INTO dbo.Produto (nm_prod, id_cat_prod) VALUES ('Cadastro 06', 1);
INSERT INTO dbo.Produto (nm_prod, id_cat_prod) VALUES ('Cadastro 07', 1);
INSERT INTO dbo.Produto (nm_prod, id_cat_prod) VALUES ('Cadastro 08', 1);

--
